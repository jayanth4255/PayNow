
{% extends "base.html" %}

{% block title %}Home - PayNow{% endblock %}

{% block content %}

{% load static %}

<section class="bg-white min-h-screen">
  <div class="max-w-6xl mx-auto px-6">

    <!-- ğŸ”¹ Top Bar -->
    <div class="flex justify-between items-center mb-8 pt-4">
      <h1 class="text-2xl font-bold mt-8">
        {% if username %}
          Hi, Welcome {{ username }}
        {% else %}
          Hi there, Welcome Guest
        {% endif %}
      </h1>
      <div class="flex gap-3">
        {% if username %}
          <a href="{% url 'profile' %}" class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 text-sm">Profile</a>
          <form action="{% url 'logout' %}" method="POST">
              {% csrf_token %}
              <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 text-sm">
                  Logout
              </button>
          </form>
        {% else %}
          <a href="{% url 'login' %}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm">Login</a>
          <a href="{% url 'signin' %}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm">Sign Up</a>
        {% endif %}
      </div>
    </div>

    {% if username %}

    <!-- ğŸ”¹ Main Content -->
    <div class="text-center mb-12 animate-fadeIn">
      <h2 class="text-4xl md:text-5xl font-semibold text-gray-900 mb-4">Simple. Secure. Smart.</h2>
      <p class="text-gray-600 text-lg mb-6">Pay friends, pay bills, shop online, recharge, and more â€” all from one app.</p>
      <img src="{% static 'images/wallet_immg.webp' %}" alt="Wallet Image" class="w-60 mx-auto mb-6 animate-bounce">
      <!-- Buttons in a single line below the image -->
      <div class="flex flex-row justify-center gap-4 mt-4">
      <button id="getStartedBtn"
        class="bg-blue-600 text-white px-5 py-3 rounded-full font-semibold shadow-lg 
           hover:bg-blue-700 transform hover:scale-105 transition w-64">
        ğŸš€ Get Started
      </button>
      <button id="seeFeaturesBtn"
        class="bg-white text-blue-600 border border-blue-600 px-5 py-3 rounded-full font-semibold shadow-lg 
           hover:bg-blue-50 transform hover:scale-105 transition w-64">
        â­ See Features
      </button>
      </div>
    </div>

    <!-- ğŸ”¹ Features -->
    <section id="features" class="bg-gray-50 py-20 animate-fadeIn">
      <div class="grid md:grid-cols-4 sm:grid-cols-2 gap-8 text-center">
        <div class="transform hover:scale-110 transition-transform duration-500">
          <a href="{% url 'upi-scan' %}"><img src="{% static 'images/scan_pay.png' %}" class="h-20 mx-auto mb-3" alt="scan and pay" /></a>
          <p class="font-medium">Scan to Pay</p>
        </div>     
        
        <div class="transform hover:scale-110 transition-transform duration-500">
          <a href="{% url 'transfer_money' %}"><img src="{% static 'images/PayaFriend.png' %}" class="h-20 mx-auto mb-3" alt="Send to Number" /></a>
          <p class="font-medium">Send to Mobile Number</p>
        </div>
        
        <div class="transform hover:scale-110 transition-transform duration-500">
          <a href="{% url 'transaction_history' %}"><img src="{% static 'images/transaction_history.png' %}" class="h-20 mx-auto mb-3" alt="Transaction History" /></a>
          <p class="font-medium">Transaction History</p>
        </div>
        <div class="transform hover:scale-110 transition-transform duration-500">
          <a href="{% url 'balance' %}"><img src="{% static 'images/balance_icon.png' %}" class="h-20 mx-auto mb-3" alt="Check Balance" /></a>
          <p class="font-medium">Check Balance</p>
        </div>
      </div>
    </section>

    <section class="bg-blue-600 text-white py-20 animate-fadeIn">
      <div class="max-w-4xl mx-auto text-center px-6">
        <h2 class="text-3xl font-bold mb-4">Trusted by Millions</h2>
        <p class="text-lg mb-6">Over 100 million users trust PayNow for daily payments. It's time you joined them.</p>
        <a href="/signup/" class="bg-white text-blue-600 px-6 py-3 rounded-full font-medium hover:bg-gray-100 transition-transform transform hover:scale-105">Join Now</a>
      </div>
    </section>

    {% else %}
    <!-- ğŸ”¹ Guest Mode -->
    <div class="relative mt-16 text-center animate-fadeIn overflow-hidden">
  <!-- Background gradient glow -->
  <div class="absolute inset-0 bg-gradient-to-b from-green-50 via-white to-blue-50 -z-10"></div>

  <!-- Floating confetti (fun touch) -->
  <div class="absolute inset-0 pointer-events-none">
    <img src="{% static 'images/confetti.png' %}" class="w-full h-full object-cover opacity-20 animate-pulse" alt="">
  </div>

  <!-- Main image with glowing pulse -->
  <div class="relative w-64 mx-auto">
    <img src="{% static 'images/wallet_immg.webp' %}" 
         class="mx-auto w-64 animate-bounce-slow drop-shadow-xl" 
         alt="UPI Promo">
    <div class="absolute inset-0 rounded-full border-4 border-green-400 animate-ping opacity-30"></div>
  </div>

  <!-- Main heading -->
  <h1 class="mt-6 text-4xl font-extrabold text-gray-800 leading-tight">
    Join <span class="text-green-600">PayNow</span> Today & <br>
    Get Your First Reward in <span class="text-blue-500">5 Minutes</span> ğŸš€
  </h1>

  <!-- Subtext -->
  <p class="mt-4 text-lg text-gray-600 max-w-xl mx-auto">
    The fastest, safest & most rewarding way to send and receive money.  
    <span class="font-semibold text-yellow-500">Cashback guaranteed</span> on your first transfer!
  </p>

  <!-- Benefits section -->
  <div class="flex flex-wrap justify-center gap-6 mt-8 text-left max-w-3xl mx-auto">
    <div class="bg-white shadow-lg rounded-xl p-5 flex items-center gap-3 hover:shadow-2xl hover:scale-105 transition transform">
      <span class="bg-green-100 text-green-600 p-3 rounded-full text-xl">âš¡</span>
      <span class="text-gray-800 font-medium">Lightning-Fast UPI Transfers</span>
    </div>
    <div class="bg-white shadow-lg rounded-xl p-5 flex items-center gap-3 hover:shadow-2xl hover:scale-105 transition transform">
      <span class="bg-yellow-100 text-yellow-600 p-3 rounded-full text-xl">ğŸ</span>
      <span class="text-gray-800 font-medium">Instant Rewards & Cashback</span>
    </div>
    <div class="bg-white shadow-lg rounded-xl p-5 flex items-center gap-3 hover:shadow-2xl hover:scale-105 transition transform">
      <span class="bg-blue-100 text-blue-600 p-3 rounded-full text-xl">ğŸ›¡ï¸</span>
      <span class="text-gray-800 font-medium">Bank-Grade Security</span>
    </div>
  </div>

  <!-- Call-to-action buttons -->
  <div class="flex flex-col sm:flex-row justify-center gap-4 mt-10">
    <a href="{% url 'signin' %}" 
       class="bg-green-500 text-white px-10 py-4 rounded-full text-lg font-semibold 
              shadow-lg hover:bg-green-600 transform hover:scale-110 hover:shadow-2xl transition">
      ğŸ‰ Create Free Account
    </a>
    <a href="{% url 'login' %}" 
       class="bg-blue-500 text-white px-10 py-4 rounded-full text-lg font-semibold 
              shadow-lg hover:bg-blue-600 transform hover:scale-110 hover:shadow-2xl transition">
      ğŸ”‘ Login
    </a>
  </div>

  <!-- Trust signal -->
  <p class="mt-6 text-sm text-gray-500">
    âœ… Trusted by <span class="font-bold text-gray-700">10,000+ happy users</span> across India
  </p>

  <!-- Urgency line -->
  <p class="mt-2 text-red-500 font-medium animate-pulse">
    ğŸ¯ Sign up before midnight & get â‚¹50 bonus instantly!
  </p>
</div>

<!-- Custom slow bounce -->
<style>
  @keyframes bounce-slow {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-12px); }
  }
  .animate-bounce-slow {
    animation: bounce-slow 2s infinite;
  }
</style>

    {% endif %}

  </div>
</section>

<!-- ğŸ”¹ Animations -->
<style>
@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity: 1;}
}
.animate-fadeIn {
  animation: fadeIn 1.2s ease-in-out;
}
</style>

<!-- ğŸ”¹ See Features Interactive Modal -->
<div id="featuresModal"
     class="fixed inset-0 bg-black bg-opacity-60 hidden flex items-center justify-center z-50">
  <div class="bg-white rounded-2xl shadow-2xl w-[600px] p-6 text-center animate-fadeIn">
    <h2 class="text-2xl font-bold mb-4">â­ PayNow Features</h2>
    <div class="grid grid-cols-3 gap-6">
      <div class="p-4 bg-gray-50 rounded-lg hover:scale-105 transition">
        <p class="font-semibold">Send Money</p>
        <small>Instant UPI transfer</small>
      </div>
      <div class="p-4 bg-gray-50 rounded-lg hover:scale-105 transition">
        <p class="font-semibold">History</p>
        <small>Smart timeline view</small>
      </div>
      <div class="p-4 bg-gray-50 rounded-lg hover:scale-105 transition">
        <p class="font-semibold">Balance</p>
        <small>One-tap check</small>
      </div>
    </div>
    <button onclick="closeFeatures()" class="mt-6 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
      Close
    </button>
  </div>
</div>

<!-- ğŸ”¹ Animations + JS -->
<style>
  @keyframes fadeIn { from {opacity:0; transform:scale(0.9);} to {opacity:1; transform:scale(1);} }
  .animate-fadeIn { animation: fadeIn 0.3s ease-in-out; }
</style>

<script>
  // Open modals
  document.getElementById("getStartedBtn").onclick = () => {
    document.getElementById("onboardingModal").classList.remove("hidden");
    loadStep(1);
  };
  document.getElementById("seeFeaturesBtn").onclick = () =>
    document.getElementById("featuresModal").classList.remove("hidden");

  // Onboarding steps
  let step = 1;
  const steps = {
    1: "âœ… Step 1: Add your Bank Account securely.",
    2: "ğŸ’¸ Step 2: Send â‚¹1 to test â€“ instant transfer!",
    3: "ğŸ Step 3: Earn your reward."
  };
  function loadStep(s) {
    step = s;
    document.getElementById("onboardingSteps").innerHTML =
      `<p class='text-lg'>${steps[s]}</p>`;
    if (s === 3) {
      document.getElementById("nextStepBtn").innerText = "Finish ğŸ‰";
    }
  }
  document.getElementById("nextStepBtn").onclick = () => {
    if (step < 3) loadStep(step + 1);
    else {
      document.getElementById("onboardingModal").classList.add("hidden");
    }
  };
  function closeOnboarding(){ document.getElementById("onboardingModal").classList.add("hidden"); }
  function closeFeatures(){ document.getElementById("featuresModal").classList.add("hidden"); }
</script>

<!-- ğŸ”¹ Gamified Onboarding Modal -->
<div id="onboardingModal"
     class="fixed inset-0 bg-black bg-opacity-60 hidden flex items-center justify-center z-50">
  <div class="bg-white rounded-2xl shadow-2xl w-96 p-6 text-center animate-fadeIn">
    <h2 class="text-2xl font-bold mb-4">ğŸš€ Letâ€™s Get Started!</h2>
    <div id="onboardingSteps">
      <!-- Step content injected here by JS -->
    </div>
    <button id="nextStepBtn"
            class="mt-6 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
      Next â¡ï¸
    </button>
    <button onclick="closeOnboarding()" class="mt-3 text-gray-500 text-sm">Skip</button>
  </div>
</div>

{% endblock %}
